<!DOCTYPE html>
<html>
  <head>
    <script src="papaparse.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  <body>
  <div id="tablePrint"> </div>

  <script language="javascript" type="text/javascript">

  var results = Papa.parse('https://storage.googleapis.com/gcp-latency/latency_results.csv', {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(results) {
      var myTable= "<table><tr><th><table><tr><td>Source Region</td></tr><tr><td>Destination Region</td></tr></table></th>";
      myTable+= "<th style='width: 100px; color: red;'>asia-east1</th>";
      myTable+= "<th style='width: 100px; color: red; text-align: right;'>asia-northest1</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>asia-southeast1</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>europe-west1</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>europe-west2</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>us-central1</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>us-east1</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>us-east4</th>";
      myTable+="<th style='width: 100px; color: red; text-align: right;'>us-west1</th></tr>";
      for (let s of results.data) {
        // TODO: color based on latency
        myTable+="<tr><td style='width: 100px;'>" + s.region + "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['asia-east1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['asia-northeast1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['asia-southeast1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['europe-west1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['europe-west2']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['us-central1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['us-east1']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['us-east4']+ "</td>";
        myTable+="<td style='width: 100px; text-align: right;'>" + s['us-west1']+ "</td>";
      }
      myTable+="</table>";
      document.getElementById('tablePrint').innerHTML = myTable;
    }
  });
</script>
  </body>

</html>
